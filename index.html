<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Acc√®s secret</title>
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<style>
:root{
  --bg:#0f0f11;
  --card:#151619;
  --accent:#ff7a18; /* orange */
  --accent-2:#ffb56b;
  --neon-orange: rgba(255,122,24,0.18);
  --text:#e9eef2;
  --muted:#9aa3ad;
  --error:#ff3b3b;
}
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  background:linear-gradient(180deg,#0b0b0d,#070708);
  color:var(--text);
  display:flex;
  align-items:center;
  justify-content:center;
  padding:24px;
}
.container{
  width:100%;
  max-width:540px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border-radius:14px;
  padding:28px;
  border:1px solid rgba(255,255,255,0.03);
  box-shadow: 0 12px 40px rgba(2,6,23,0.6), inset 0 1px 0 rgba(255,255,255,0.02);
}

/* TITLE styl√© */
.title{
  font-size:28px;
  font-weight:800;
  letter-spacing:0.6px;
  margin:0 0 6px;
  line-height:1;
  background: linear-gradient(90deg, #fff 0%, var(--accent-2) 40%, var(--accent) 100%);
  -webkit-background-clip: text;
  background-clip: text;
  color: transparent;
  text-shadow: 0 6px 40px rgba(255,122,24,0.06);
  transform-style:preserve-3d;
}

/* typing animation on title when input receives focus */
.title.animate {
  animation: titlePulse .9s ease forwards;
}
@keyframes titlePulse {
  0%{transform:translateZ(0) rotateX(0); filter:blur(0)}
  50%{transform:translateZ(6px) rotateX(-2deg); filter:blur(.2px)}
  100%{transform:translateZ(0) rotateX(0); filter:blur(0)}
}

.lead{
  margin:6px 0 18px;
  color:var(--muted);
  font-size:14px;
}

/* input area */
.input-row{
  display:flex;
  gap:12px;
  align-items:center;
  margin-bottom:12px;
}
.input{
  flex:1;
  position:relative;
}
.input input{
  width:100%;
  padding:12px 14px;
  border-radius:10px;
  border:1px solid rgba(255,255,255,0.04);
  background:rgba(255,255,255,0.02);
  color:var(--text);
  outline:none;
  font-size:15px;
  transition: transform .12s ease, box-shadow .12s;
}
.input input:focus{
  transform:translateY(-3px);
  box-shadow: 0 14px 30px rgba(0,0,0,0.6), 0 0 30px var(--neon-orange);
}

/* show password checkbox */
.checkbox{
  display:flex;
  gap:8px;
  align-items:center;
  color:var(--muted);
  font-size:13px;
  user-select:none;
}

/* orange validate button with 3D & neon */
.btn{
  --h:48px;
  height:var(--h);
  padding:0 18px;
  border-radius:12px;
  border:0;
  cursor:pointer;
  background:linear-gradient(180deg,var(--accent),var(--accent-2));
  box-shadow: 0 12px 30px rgba(255,122,24,0.12), 0 6px 0 rgba(0,0,0,0.4);
  color:#051014;
  font-weight:800;
  letter-spacing:0.4px;
  transform:translateY(0);
  transition: transform .14s cubic-bezier(.2,.9,.2,1), box-shadow .14s, filter .12s;
  position:relative;
  overflow:hidden;
}

/* neon edge */
.btn::before{
  content:'';
  position:absolute;
  inset:0;
  border-radius:12px;
  box-shadow: 0 0 34px rgba(255,122,24,0.14), inset 0 0 10px rgba(255,200,140,0.03);
  pointer-events:none;
  opacity:0.9;
}

/* hover animation */
.btn:hover{
  transform: translateY(-6px) rotateX(4deg) scale(1.02);
  filter:brightness(1.04);
  box-shadow: 0 20px 50px rgba(255,122,24,0.16), 0 8px 0 rgba(0,0,0,0.35);
}

/* click effect */
.btn:active{
  transform: translateY(-2px) scale(.995);
}

/* ripple effect */
.ripple{
  position:absolute;
  border-radius:50%;
  transform:translate(-50%,-50%) scale(0.6);
  opacity:.5;
  pointer-events:none;
  animation:rippleAnim .6s ease-out forwards;
  background:rgba(255,255,255,0.12);
}
@keyframes rippleAnim{ to{transform:translate(-50%,-50%) scale(4); opacity:0} }

/* status messages */
.status{min-height:24px;margin-top:8px;font-weight:600;color:var(--muted);font-size:14px}
.status.ok{color:#7ff0c9;text-shadow:0 8px 30px rgba(0,200,160,0.05)}
.status.error{
  color:var(--error);
  text-shadow: 0 0 18px rgba(255,59,59,0.35);
  font-weight:900;
  font-size:15px;
  background: linear-gradient(90deg, rgba(255,59,59,0.02), transparent);
  padding:8px;
  border-radius:8px;
  margin-top:10px;
}

/* hint */
.hint{margin-top:12px;color:var(--muted);font-size:13px;background: rgba(255,255,255,0.01);padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.01)}

/* responsive */
@media (max-width:520px){
  .input-row{flex-direction:column; align-items:stretch}
  .btn{width:100%}
}
</style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <h1 id="title" class="title">Acc√®s s√©curis√©</h1>
    <p class="lead">Entre le mot de passe pour d√©verrouiller la page</p>

    <div class="input-row">
      <div class="input">
        <input id="pw" type="password" placeholder="Mot de passe" aria-label="mot de passe">
      </div>
      <button id="submit" class="btn" aria-label="Valider">Valider</button>
    </div>

    <div style="display:flex;align-items:center;gap:10px;margin-top:8px">
      <label class="checkbox"><input id="show" type="checkbox">Afficher le mot de passe</label>
    </div>

    <div id="status" class="status" aria-live="polite"></div>

    <div class="hint">
      <strong>Indice :</strong> C'est mon pr√©nom avec une majuscule, il y a ensuite / puis ma date de naissance, puis le pr√©nom avec une majuscule d'une personne que j'aime, puis encore un /, le pr√©nom de mon chat avec une majuscule, la 24e lettre de l'alphabet et un !<br>
      <em>exemple : Gilbert/1983/Gabriel/ProutG!</em>
    </div>
  </div>

<script>
/* CONFIG - remplacer par l'URL de ton backend Replit (sans slash final) */
const API = 'https://TON-REPLIT-URL.repl.co';

const input = document.getElementById('pw');
const btn = document.getElementById('submit');
const status = document.getElementById('status');
const show = document.getElementById('show');
const title = document.getElementById('title');

/* show/hide password */
show.addEventListener('change', ()=> {
  input.type = show.checked ? 'text' : 'password';
});

/* ripple on button */
function rippleAt(e, el){
  const r = document.createElement('span');
  r.className = 'ripple';
  const rect = el.getBoundingClientRect();
  const x = (e.clientX || rect.left + rect.width/2) - rect.left;
  const y = (e.clientY || rect.top + rect.height/2) - rect.top;
  r.style.left = x + 'px';
  r.style.top = y + 'px';
  el.appendChild(r);
  setTimeout(()=> r.remove(), 700);
}

/* typing animation trigger */
input.addEventListener('input', ()=> {
  title.classList.add('animate');
  clearTimeout(title._t);
  title._t = setTimeout(()=> title.classList.remove('animate'), 600);
});

/* submit */
btn.addEventListener('click', async (e) => {
  rippleAt(e, btn);
  await submitPass();
});
input.addEventListener('keydown', (e)=> { if(e.key === 'Enter') submitPass(); });

let busy = false;
async function submitPass(){
  if(busy) return;
  busy = true;
  status.textContent = 'V√©rification...';
  status.className = 'status';
  const pw = input.value;
  try {
    const r = await fetch(API + '/auth', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ code: pw })
    });
    const j = await r.json();
    if(r.ok && j.ok){
      status.textContent = 'Acc√®s autoris√©. Copie le token ci-dessous.';
      status.className = 'status ok';
      // affiche token si pr√©sent
      if(j.token){
        const el = document.createElement('div');
        el.style.marginTop='10px';
        el.style.padding='10px';
        el.style.background='rgba(255,255,255,0.02)';
        el.style.borderRadius='8px';
        el.style.wordBreak='break-all';
        el.textContent = j.token;
        status.appendChild(el);
      }
    } else {
      status.textContent = j.error || 'mot de passe incorrect, essaie encore üòâ';
      // style error
      status.className = 'status error';
    }
  } catch(err){
    status.textContent = 'Erreur r√©seau. V√©rifie ton backend.';
    status.className = 'status error';
  } finally { busy = false; }
}
</script>
</body>
</html>
